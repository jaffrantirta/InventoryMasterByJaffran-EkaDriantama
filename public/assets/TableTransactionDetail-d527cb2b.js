import{r as o,j as r,a as t,R as D}from"./app-c2e52a93.js";import{T as E,a as c,n as d}from"./TableHeader-c6fdd518.js";import{T as m}from"./TextInput-aa3fc491.js";import{P as q}from"./PrimaryButton-d03adcf2.js";function S({heads:g,contents:p,onClick:F,listenGrandTotal:b,onItemsSelectedUpdate:h,is_purchase:N,onDiscountChanged:T}){const[n,u]=o.useState([]),[v,x]=o.useState(0),[i,y]=o.useState(0);o.useEffect(()=>{u(p.map(a=>({...a,is_wholesaler:!1})))},[p]),o.useEffect(()=>{R()},[n,i]);const C=a=>{const e=parseFloat(a.target.value);y(e),T(e)},k=(a,e)=>{var f;const s=[...n],l=s[a];let j=l.is_wholesaler?(f=l.unit)==null?void 0:f.price:l.price;s[a].qty=e,s[a].subTotal=e*j,l.is_wholesaler&&l.unit.sum*l.qty>l.stock&&(s[a].message="Stok tidak cukup"),u(s),h(s)},I=(a,e)=>{console.log(e);const s=[...n],l=s[a];s[a].price=e,s[a].subTotal=l.qty*e,u(s),h(s)},w=a=>{const e=[...n];e.splice(a,1),u(e),h(e)},R=()=>{let a=0;n.forEach(s=>{a+=s.subTotal||0});const e=a-i;b(e),x(e)};return r("div",{children:[t("div",{className:"overflow-x-auto",children:r("table",{className:"w-full",children:[t("thead",{className:"",children:t("tr",{className:"text-center font-bold text-xl",children:g.map((a,e)=>t(E,{title:a},e))})}),t("tbody",{children:n.map((a,e)=>t(D.Fragment,{children:r("tr",{className:"border-b",children:[t(c,{className:"text-center",children:e+1}),t(c,{children:a==null?void 0:a.name}),r(c,{className:"text-center",children:[t(m,{className:"text-center",value:d(a==null?void 0:a.qty).format("0,0"),onChange:s=>k(e,s.target.value)}),t("small",{children:a.message})]}),t(c,{children:a.unit_name}),N?t(c,{className:"text-center",children:t(m,{className:"text-center",value:a==null?void 0:a.price,onChange:s=>I(e,s.target.value)})}):t(c,{className:"text-right",children:d(a==null?void 0:a.price).format("0,0")}),t(c,{className:"text-right",children:d(a==null?void 0:a.subTotal).format("0,0")}),t(c,{className:"flex justify-center gap-5",children:t(q,{className:"bg-red-500 dark:bg-red-300",onClick:()=>w(e),children:"Hapus"})})]})},e))})]})}),r("div",{className:"text-right mt-4",children:[r("div",{children:[t("label",{htmlFor:"discountInput",className:"mr-2",children:"Discount: Rp"}),t(m,{id:"discountInput",type:"number",value:i,onChange:C})]}),r("p",{className:"font-bold",children:["Total : Rp",d(v).format("0,0")]})]})]})}export{S as default};
