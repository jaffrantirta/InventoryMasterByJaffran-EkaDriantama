import{r,_ as O,W,j as l,a as t,n as q,d as z,F as J}from"./app-c2e52a93.js";import{P as w}from"./PrimaryButton-d03adcf2.js";import{A as L}from"./AuthenticatedLayout-7e7bb6fa.js";import Q from"./TableItem-944a1629.js";import V from"./ModalItem-38576bc7.js";import{T as X}from"./TextInput-aa3fc491.js";import{t as S}from"./transition-a4acc27a.js";import"./ApplicationLogo-b0e4221b.js";import"./Dropdown-e42d57b0.js";import"./Paginate-6440b45e.js";import"./TableHeader-c6fdd518.js";import"./InputError-dda5b5b1.js";import"./InputLabel-b6c5a941.js";import"./Modal-a9ea5355.js";function fe({auth:b,items:p,roles:C,categories:T}){const m=r.useRef(null),[I,i]=r.useState(!1),[h,c]=r.useState(!1),[o,d]=r.useState(!1),[_,u]=r.useState(0),{data:R,setData:s,post:A,patch:D,delete:U,processing:j,errors:B,reset:F,recentlySuccessful:H,hasErrors:g}=O({name:"",price:0,stock:0,min_stock:0,reference_code:"",categories:"",shipping_day:null,unit_name:"",unit_price:0,unit_sum:0,is_wholesale:!1}),M=e=>{e.preventDefault(),h&&D(route("item.update",{id:_})),o&&U(route("item.destroy",{id:_})),!h&&!o&&A(route("item.store")),$()},$=()=>{F(),i(!1),c(!1),d(!1),u(0),m.current.scrollTop=0},x=(e,a)=>{var k,v,y,N;e==="edit"&&(s({reference_code:a.reference_code,categories:a.categories,name:a.name,price:a.price,stock:a.unit!==null?a.stock/((k=a.unit)==null?void 0:k.sum):a.stock,min_stock:a.min_stock,shipping_day:a.shipping_day,unit_name:(v=a.unit)==null?void 0:v.name,unit_price:(y=a.unit)==null?void 0:y.price,unit_sum:(N=a.unit)==null?void 0:N.sum,is_wholesaler:a.unit!==null}),u(a.id),c(!0),i(!0)),e==="delete"&&(d(!0),u(a.id),i(!0)),e==="cancel"&&(i(!1),d(!1),c(!1))},E=e=>{e.field==="reference_code"&&s("reference_code",e.value),e.field==="categories"&&s("categories",e.value),e.field==="name"&&s("name",e.value),e.field==="price"&&s("price",e.value),e.field==="stock"&&s("stock",e.value),e.field==="min_stock"&&s("min_stock",e.value),e.field==="shipping_day"&&s("shipping_day",e.value),e.field==="unit_name"&&s("unit_name",e.value),e.field==="unit_price"&&s("unit_price",e.value),e.field==="unit_sum"&&s("unit_sum",e.value),e.field==="is_wholesaler"&&s("is_wholesaler",e.value)},[f,K]=r.useState(""),P=e=>{K(e.target.value)},{url:n}=W(),G=f?n.includes("?search")?`${n.split("?search")[0]}?search=${encodeURIComponent(f)}`:`${n}?search=${encodeURIComponent(f)}`:n;return l(L,{roles:C,user:b.user,header:t("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Barang"}),children:[t(q,{title:"Barang"}),t("div",{ref:m}),g&&t("div",{className:"p-5",children:t(S,{show:g,enterFrom:"opacity-0",leaveTo:"opacity-0",className:"transition ease-in-out bg-red-200 p-3 rounded-3xl",children:t("p",{className:"text-red-900 dark:text-red-600 text-center font-bold text-xl",children:"Oops! Ada kesalahan"})})}),t("div",{className:"p-5",children:t(S,{show:H,enterFrom:"opacity-0",leaveTo:"opacity-0",className:"transition ease-in-out bg-slate-200 p-3 rounded-3xl",children:t("p",{className:"text-slate-900 dark:text-slate-600 text-center font-bold text-xl",children:"Sukses!"})})}),l("div",{className:"p-10 dark:text-slate-200",children:[l("div",{className:"flex justify-between",children:[l("div",{className:"flex gap-5",children:[t(X,{className:"my-4",placeholder:"pencarian...",onChange:P}),t(z,{href:G,children:t(w,{className:"my-5 w-full md:w-fit",children:t("p",{className:"w-full text-center",children:"Cari"})})})]}),t(w,{className:"my-5 w-full md:w-fit",onClick:()=>i(!0),children:t("p",{className:"w-full text-center",children:"Tambah"})})]}),t(Q,{heads:["No.","Kode Barang","Kategori","Nama","Harga Eceran (Rp)","Harga Grosir (Rp)","Stok (pcs)","Min. Stock","Status","Aksi"],contents:p,onClick:(e,a)=>x(e,a)})]}),t(V,{submit:e=>M(e),data:R,errors:B,isDelete:o,categories:T,processing:j,setData:e=>E(e),showModel:I,onClick:e=>x(e)}),p.data.length===0?t("p",{className:"text-xl my-10 text-center dark:text-white",children:"Tidak ada data."}):t(J,{})]})}export{fe as default};
